#!/sbin/openrc-run
# NUT upsd load

nut_prefix=${nut_prefix-"/usr/local"}
pidfile="/var/db/nut/upsd.pid"
command="${nut_prefix}/sbin/upsd"
name="NUT UPS Daemon"

depend() {
#        use net
         before upsmon
         after upsdrv
}

start() {
        ebegin "Starting ${SVCNAME}"
	# clean up first
	pkill -u root,uucp -x ${command}
	sleep 1
	rm -f ${pidfile}
	# now start up
        start-stop-daemon --start --quiet --exec ${command}
        eend $? 
}

stop() {
        ebegin "Stopping ${SVCNAME}"
        start-stop-daemon --stop --quiet --pidfile ${pidfile}
        eend $? 
}

reload() {
	ebegin "Reloading ${SVCNAME}"
	start-stop-daemon --stop --signal HUP --oknodo --quiet --pidfile ${pidfile}
	eend $?
}
